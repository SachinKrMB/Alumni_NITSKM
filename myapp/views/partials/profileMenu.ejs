<style>
  .profile-menu {
    position: relative;
    display: inline-block;
  }

  .profile-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    background: none;
    border: none;
    padding: 6px 10px;
    font-size: 14px;
  }

  .profile-btn img {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    object-fit: cover;
  }

  .dropdown-content {
    display: none;
    position: absolute;
    right: 0;
    background-color: #fff;
    min-width: 160px;
    box-shadow: 0px 4px 8px rgba(0,0,0,0.1);
    border-radius: 6px;
    z-index: 1000;
  }

  .dropdown-content a {
    display: block;
    padding: 10px 14px;
    text-decoration: none;
    color: #333;
    font-size: 14px;
  }

  .dropdown-content a:hover {
    background-color: #f4f4f4;
  }

  .profile-menu.show .dropdown-content {
    display: block;
  }
</style>

<div class="profile-menu" id="profileMenu">
  <button class="profile-btn" onclick="toggleProfileMenu()">
    <img src="<%= user?.avatarUrl || '/default-avatar.png' %>" alt="avatar">
    <span><%= user?.name || 'Profile' %></span>
  </button>
  <div class="dropdown-content">
    <a href="/profile">View Profile</a>
    <a href="/settings">Settings</a>
    <a href="/logout">Logout</a>
  </div>
</div>

<script>
  function toggleProfileMenu() {
    const menu = document.getElementById("profileMenu");
    menu.classList.toggle("show");
  }

  // close dropdown if clicked outside
  document.addEventListener("click", function(event) {
    const menu = document.getElementById("profileMenu");
    if (menu && !menu.contains(event.target)) {
      menu.classList.remove("show");
    }
  });
</script>
